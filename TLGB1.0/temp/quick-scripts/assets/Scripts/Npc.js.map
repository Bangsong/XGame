{"version":3,"sources":["Npc.js"],"names":["heartTmp","require","cc","Class","extends","Component","properties","boomAudio","url","AudioClip","default","heartDestroyAudio","floorY","type","Integer","npcAction","scaleSmall","scaleTo","scaleBig","seq","sequence","node","runAction","repeatForever","onLoad","onCollisionEnter","other","audioEngine","play","destroy","score","find","getComponent","Label","string","parseInt","update","dt","downSpeed","random0To1","y","heartNode","heart"],"mappings":";;;;;;AAAA,IAAIA,WAAWC,QAAQ,OAAR,CAAf;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,mBAAU;AACNC,iBAAIN,GAAGO,SADD;AAENC,qBAAQ;AAFF,SADF;AAKRC,2BAAkB;AACdH,iBAAIN,GAAGO,SADO;AAEdC,qBAAQ;AAFM,SALV;AASRE,gBAAO;AACHC,kBAAKX,GAAGY,OADL;AAEHJ,qBAAQ,CAAC;AAFN;AATC,KAFP;AAgBLK,aAhBK,uBAgBQ;AACT,YAAIC,aAAad,GAAGe,OAAH,CAAW,GAAX,EAAe,GAAf,EAAmB,GAAnB,CAAjB;AACA,YAAIC,WAAWhB,GAAGe,OAAH,CAAW,GAAX,EAAe,CAAf,EAAiB,CAAjB,CAAf;AACA,YAAIE,MAAMjB,GAAGkB,QAAH,CAAYJ,UAAZ,EAAuBE,QAAvB,CAAV;AACA,aAAKG,IAAL,CAAUC,SAAV,CAAoBpB,GAAGqB,aAAH,CAAiBJ,GAAjB,CAApB;AACH,KArBI;AAsBLK,UAtBK,oBAsBK;AACN,aAAKT,SAAL;AACH,KAxBI;;AAyBLU,sBAAkB,0BAAUC,KAAV,EAAiB;AAC/B;AACAxB,WAAGyB,WAAH,CAAeC,IAAf,CAAoB,KAAKrB,SAAzB,EAAmC,KAAnC,EAAyC,GAAzC;AACA,aAAKc,IAAL,CAAUQ,OAAV;AACA,YAAIC,QAAQ5B,GAAG6B,IAAH,CAAQ,wBAAR,EAAkCC,YAAlC,CAA+C9B,GAAG+B,KAAlD,CAAZ;AACAH,cAAMI,MAAN,GAAeC,SAASL,MAAMI,MAAf,IAAyB,CAAxC;AACH,KA/BI;AAgCLE,UAhCK,kBAgCGC,EAhCH,EAgCO;AACR,YAAIC,YAAYpC,GAAGqC,UAAH,KAAkB,GAAlB,GAAwB,CAAxC;AACA,aAAKlB,IAAL,CAAUmB,CAAV;AACA,YAAG,KAAKnB,IAAL,CAAUmB,CAAV,IAAe,KAAK5B,MAAvB,EAA8B;AAC1B,iBAAKS,IAAL,CAAUQ,OAAV;AACA3B,eAAGyB,WAAH,CAAeC,IAAf,CAAoB,KAAKjB,iBAAzB,EAA2C,KAA3C,EAAiD,GAAjD;AACA,gBAAI8B,YAAYvC,GAAG6B,IAAH,CAAQ,cAAR,CAAhB;AACA,gBAAGU,SAAH,EAAa;AACT,oBAAIC,QAAQD,UAAUT,YAAV,CAAuBhC,QAAvB,CAAZ;AACA0C,sBAAMrB,IAAN,CAAWQ,OAAX;AACH;AACJ;AACJ;AA5CI,CAAT","file":"Npc.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["var heartTmp = require(\"Heart\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        boomAudio:{\r\n            url:cc.AudioClip,\r\n            default:null\r\n        },\r\n        heartDestroyAudio:{\r\n            url:cc.AudioClip,\r\n            default:null\r\n        },\r\n        floorY:{\r\n            type:cc.Integer,\r\n            default:-233\r\n        },\r\n    },\r\n    npcAction () {\r\n        var scaleSmall = cc.scaleTo(0.1,0.8,0.9);\r\n        var scaleBig = cc.scaleTo(0.1,1,1);\r\n        var seq = cc.sequence(scaleSmall,scaleBig); \r\n        this.node.runAction(cc.repeatForever(seq));\r\n    },\r\n    onLoad () {\r\n        this.npcAction();\r\n    },\r\n    onCollisionEnter: function (other) {\r\n        // console.log(\"发生碰撞\");\r\n        cc.audioEngine.play(this.boomAudio,false,0.5);\r\n        this.node.destroy();\r\n        var score = cc.find(\"Canvas/scoreNode/score\").getComponent(cc.Label);\r\n        score.string = parseInt(score.string) + 1;\r\n    },\r\n    update (dt) {\r\n        var downSpeed = cc.random0To1() * 200 + 1;\r\n        this.node.y--;\r\n        if(this.node.y <= this.floorY){\r\n            this.node.destroy();\r\n            cc.audioEngine.play(this.heartDestroyAudio,false,0.5);\r\n            var heartNode = cc.find(\"Canvas/heart\");\r\n            if(heartNode){\r\n                var heart = heartNode.getComponent(heartTmp);\r\n                heart.node.destroy();\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}